# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

## üìã –®–∞–≥–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Supabase Dashboard](https://supabase.com/dashboard)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `supabase-schema.sql` –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL —Å–∫—Ä–∏–ø—Ç–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã:

- ‚úÖ `profiles` - –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ `listings` - –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ —Å–¥–∞—á–µ –±–∞–≥–∞–∂–∞
- ‚úÖ `bookings` - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ `listing_images` - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏

–í **Authentication > Policies** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü:

#### Profiles —Ç–∞–±–ª–∏—Ü–∞:
- `Users can view their own profile`
- `Users can update their own profile`
- `Users can insert their own profile`

#### Listings —Ç–∞–±–ª–∏—Ü–∞:
- `Anyone can view available listings`
- `Hosts can view their own listings`
- `Hosts can create listings`
- `Hosts can update their own listings`
- `Hosts can delete their own listings`

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç—Ä–∏–≥–≥–µ—Ä

–í **Database > Functions** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω —Ç—Ä–∏–≥–≥–µ—Ä:
- `handle_new_user` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### 5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Authentication

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Authentication > Settings**
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ **Enable email confirmations** –≤–∫–ª—é—á–µ–Ω–æ
3. –í **Site URL** —É–∫–∞–∂–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω Vercel
4. –í **Redirect URLs** –¥–æ–±–∞–≤—å—Ç–µ:
   - `https://your-domain.vercel.app/`
   - `https://your-domain.vercel.app/account`

### 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Environment Variables

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ Vercel –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```
VITE_SUPABASE_URL=https://majhlkvnwnsycbtpguzb.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hamhsa3Zud25zeWNidHBndXpiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQxNzAyMzEsImV4cCI6MjA2OTc0NjIzMX0.7_R6TdDY8qxyrIUXMLRoXD1p4FfTxeiZWwNAlV1lo9M
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –Ω–∞ Vercel
2. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –¥–æ —Å–µ–∫—Ü–∏–∏ "Supabase Connection Test"
3. –ù–∞–∂–º–∏—Ç–µ "Test Connection"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### 2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

1. –ù–∞–∂–º–∏—Ç–µ "Create Test Profile" - –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –≤ —Ç–∞–±–ª–∏—Ü–µ `profiles`
2. –ù–∞–∂–º–∏—Ç–µ "Create Test Listing" - –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–µ `listings`

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Supabase Dashboard

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Table Editor**
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É `profiles` - –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É `listings` - –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Ç–µ—Å—Ç–æ–≤—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

## üö® –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞: "Table does not exist"
**–†–µ—à–µ–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç –∑–∞–Ω–æ–≤–æ

### –ü—Ä–æ–±–ª–µ–º–∞: "RLS policy violation"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ —Å–æ–∑–¥–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞: "Authentication failed"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: "Trigger not working"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç—Ä–∏–≥–≥–µ—Ä `handle_new_user` —Å–æ–∑–¥–∞–Ω –∏ –∞–∫—Ç–∏–≤–µ–Ω

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞—é—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ SQL –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏—Å—å —É—Å–ø–µ—à–Ω–æ 